## ğŸ“ Project 3: H3 æ¼æ´æ³¨å…¥æ€»ç»“æŠ¥å‘Š

### ğŸ“‹ æ¼æ´æ€»è§ˆè¡¨

| æ¼æ´ç¼–å· | æ¼æ´ç±»å‹ | å½±å“æ–‡ä»¶ | å‡½æ•°å | ä¸¥é‡æ€§ | è§¦å‘æ¡ä»¶ |
| :-------: | :--- | :--- | :--- | :---: | :--- |
| **VUL-1** | **æœ‰ç¬¦å·æ•´æ•°æº¢å‡º** | `src/h3lib/lib/algos.c` | `maxGridDiskSize` | **ä¸­** | [cite_start]ä¼ å…¥æ¥è¿‘ `INT32_MAX` çš„ `k` å€¼ [cite: 9, 22]ã€‚ |
| **VUL-2** | **å†…å­˜æ³„æ¼ (é”™è¯¯è·¯å¾„)** | `src/h3lib/lib/h3Index.c` | `compactCells` | **ä¸­** | [cite_start]è®¾ç½®ä¿ç•™ä½è§¦å‘ `E_CELL_INVALID` [cite: 38, 41]ã€‚ |
| **VUL-3** | **è¶Šç•Œè¯»å–** | `src/h3lib/lib/localij.c` | `localIjToCell` | **é«˜** | [cite_start]ä¼ å…¥æç«¯åæ ‡å€¼ `{INT32_MAX, INT32_MAX}` [cite: 55]ã€‚ |
| **VUL-4** | **å†…å­˜æ³„æ¼ (é“¾è¡¨)** | `src/h3lib/lib/linkedGeo.c` | `destroyLinkedMultiPolygon` | **ä¸­** | [cite_start]é”€æ¯åŒ…å«å¤šä¸ªå¾ªç¯çš„å¤šè¾¹å½¢ç»“æ„ï¼Œç¬¬ä¸€ä¸ªå¾ªç¯èŠ‚ç‚¹å†…å­˜æœªé‡Šæ”¾ [cite: 76]ã€‚ |
| **VUL-5** | **ä½¿ç”¨æœªåˆå§‹åŒ–å€¼** | `src/h3lib/lib/vertex.c` | `cellToVertex` | **é«˜** | [cite_start]åœ¨ç‰¹å®šä»£ç è·¯å¾„ä¸‹ä½¿ç”¨æœªåˆå§‹åŒ–çš„ `lRotation` [cite: 85, 91]ã€‚ |

---

## ğŸ“ è¯¦ç»†ä¿¡æ¯è¡¨

### æ¼æ´ #1: æœ‰ç¬¦å·æ•´æ•°æº¢å‡º (Signed Integer Overflow)

| å±æ€§ | è¯¦æƒ… |
| :--- | :--- |
| **ç¼–å·** | [cite_start]VUL-1 [cite: 9] |
| **ç±»å‹** | [cite_start]æœ‰ç¬¦å·æ•´æ•°æº¢å‡º [cite: 9] |
| **ä¸¥é‡æ€§** | [cite_start]ä¸­ (ä¸­ä¸¥é‡æ€§) [cite: 94] |
| **æ–‡ä»¶** | [cite_start]`src/h3lib/lib/algos.c` [cite: 9] |
| **å‡½æ•°** | [cite_start]`maxGridDiskSize` [cite: 9] |
| **è¡Œå·** | [cite_start]168-180 [cite: 9] |
| **ä¿®æ”¹å†…å®¹** | [cite_start]åˆ é™¤äº†å¯¹ `k` >= `K_ALL_CELLS_AT_RES_15` çš„æº¢å‡ºä¿æŠ¤æ£€æŸ¥ [cite: 18]ã€‚ |
| **æœºåˆ¶** | [cite_start]å…è®¸è®¡ç®— 3k(k+1)+1 æ—¶å‘ç”Ÿæœ‰ç¬¦å·æ•´æ•°æº¢å‡º [cite: 19]ã€‚ |
| **è§¦å‘æ–¹å¼** | [cite_start]è°ƒç”¨ `maxGridDiskSize(2147483647, &size)` [cite: 9, 22]ã€‚ |
| **æ£€æµ‹å·¥å…·** | [cite_start]UBSan [cite: 25]ã€‚ |

### æ¼æ´ #2: å†…å­˜æ³„æ¼ (é”™è¯¯è·¯å¾„)

| å±æ€§ | è¯¦æƒ… |
| :--- | :--- |
| **ç¼–å·** | [cite_start]VUL-2 [cite: 9] |
| **ç±»å‹** | [cite_start]å†…å­˜æ³„æ¼ (é”™è¯¯è·¯å¾„) [cite: 9] |
| **ä¸¥é‡æ€§** | [cite_start]ä¸­ (ä¸­ä¸¥é‡æ€§) [cite: 94] |
| **æ–‡ä»¶** | [cite_start]`src/h3lib/lib/h3Index.c` [cite: 9] |
| **å‡½æ•°** | [cite_start]`compactCells` [cite: 9] |
| **è¡Œå·** | [cite_start]595-608 [cite: 9] |
| **ä¿®æ”¹å†…å®¹** | [cite_start]æ³¨é‡Šæ‰é”™è¯¯è·¯å¾„ä¸Šçš„ä¸¤ä¸ª `H3_MEMORY(free)` è°ƒç”¨ [cite: 33]ã€‚ |
| **æœºåˆ¶** | [cite_start]å¯¼è‡´ `remainingHexes` å’Œ `hashSetArray` å†…å­˜æ³„æ¼ [cite: 34]ã€‚ |
| **è§¦å‘æ–¹å¼** | [cite_start]ä¼ å…¥å«æœ‰éé›¶ä¿ç•™ä½çš„ `H3Index` (å¦‚è®¾ç½®ä¿ç•™ä½è§¦å‘é”™è¯¯) [cite: 38]ã€‚ |
| **æ£€æµ‹å·¥å…·** | [cite_start]LSan, Valgrind [cite: 42, 96]ã€‚ |

### æ¼æ´ #3: è¶Šç•Œè¯»å– (Out-of-Bounds Read)

| å±æ€§ | è¯¦æƒ… |
| :--- | :--- |
| **ç¼–å·** | [cite_start]VUL-3 [cite: 9] |
| **ç±»å‹** | [cite_start]è¶Šç•Œè¯»å– [cite: 9] |
| **ä¸¥é‡æ€§** | [cite_start]é«˜ (é«˜ä¸¥é‡æ€§) [cite: 94] |
| **æ–‡ä»¶** | [cite_start]`src/h3lib/lib/localij.c` [cite: 9] |
| **å‡½æ•°** | [cite_start]`localIjToCell` [cite: 9] |
| **è¡Œå·** | [cite_start]562-574 [cite: 9] |
| **ä¿®æ”¹å†…å®¹** | [cite_start]åˆ é™¤äº†å¯¹ `ijToIjk()` è¿”å›å€¼çš„é”™è¯¯æ£€æŸ¥ [cite: 51]ã€‚ |
| **æœºåˆ¶** | [cite_start]å…è®¸æ— æ•ˆçš„åæ ‡ä¼ é€’ç»™ `localIjkToCell()`ï¼Œå¯¼è‡´è¶Šç•Œè®¿é—®å†…éƒ¨æŸ¥æ‰¾è¡¨ [cite: 52, 57]ã€‚ |
| **è§¦å‘æ–¹å¼** | [cite_start]ä¼ å…¥æç«¯åæ ‡å€¼ `CoordIJ ij = {INT32_MAX, INT32_MAX}` [cite: 55]ã€‚ |
| **æ£€æµ‹å·¥å…·** | [cite_start]ASan [cite: 58, 96]ã€‚ |

### æ¼æ´ #4: å†…å­˜æ³„æ¼ (é“¾è¡¨é‡Šæ”¾)

| å±æ€§ | è¯¦æƒ… |
| :--- | :--- |
| **ç¼–å·** | [cite_start]VUL-4 [cite: 9] |
| **ç±»å‹** | [cite_start]å†…å­˜æ³„æ¼ (é“¾è¡¨é‡Šæ”¾) [cite: 9] |
| **ä¸¥é‡æ€§** | [cite_start]ä¸­ (ä¸­ä¸¥é‡æ€§) [cite: 94] |
| **æ–‡ä»¶** | [cite_start]`src/h3lib/lib/linkedGeo.c` [cite: 9] |
| **å‡½æ•°** | [cite_start]`destroyLinkedMultiPolygon` [cite: 9] |
| **è¡Œå·** | [cite_start]110-131 [cite: 9] |
| **ä¿®æ”¹å†…å®¹** | [cite_start]ä¿®æ”¹å¾ªç¯é‡Šæ”¾é€»è¾‘ï¼Œæ·»åŠ æ¡ä»¶è·³è¿‡ç¬¬ä¸€ä¸ªå¾ªç¯èŠ‚ç‚¹çš„é‡Šæ”¾ [cite: 66, 67]ã€‚ |
| **æœºåˆ¶** | [cite_start]å¯¼è‡´ç¬¬ä¸€ä¸ªå¾ªç¯èŠ‚ç‚¹ç»“æ„ä½“å†…å­˜æœªè¢«é‡Šæ”¾ [cite: 76]ã€‚ |
| **è§¦å‘æ–¹å¼** | [cite_start]é”€æ¯åŒ…å«å¤šä¸ªå¾ªç¯çš„å¤šè¾¹å½¢ç»“æ„ [cite: 75]ã€‚ |
| **æ£€æµ‹å·¥å…·** | [cite_start]LSan, Valgrind [cite: 77, 96]ã€‚ |

### æ¼æ´ #5: ä½¿ç”¨æœªåˆå§‹åŒ–å€¼

| å±æ€§ | è¯¦æƒ… |
| :--- | :--- |
| **ç¼–å·** | [cite_start]VUL-5 [cite: 9] |
| **ç±»å‹** | [cite_start]ä½¿ç”¨æœªåˆå§‹åŒ–å€¼ [cite: 9] |
| **ä¸¥é‡æ€§** | [cite_start]é«˜ (é«˜ä¸¥é‡æ€§) [cite: 94] |
| **æ–‡ä»¶** | [cite_start]`src/h3lib/lib/vertex.c` [cite: 81] |
| **å‡½æ•°** | [cite_start]`cellToVertex` [cite: 83] |
| **è¡Œå·** | [cite_start]227-241 [cite: 82] |
| **ä¿®æ”¹å†…å®¹** | [cite_start]åˆ é™¤äº†å˜é‡åˆå§‹åŒ– `int rotations;` [cite: 85]ã€‚ |
| **æœºåˆ¶** | [cite_start]å¯¼è‡´åœ¨æŸäº›ä»£ç è·¯å¾„ä¸‹ï¼Œæœªåˆå§‹åŒ–çš„ `rotations` å€¼è¢«ä¼ é€’ç»™ `h3NeighborRotations` [cite: 86, 91]ã€‚ |
| **è§¦å‘æ–¹å¼** | [cite_start]è°ƒç”¨ `cellToVertex(cell, vertexNum, &vertex)` [cite: 90]ã€‚ |
| **æ£€æµ‹å·¥å…·** | [cite_start]MSan, Valgrind [cite: 92, 96]ã€‚ |

---

## ğŸ“ˆ ç»Ÿè®¡ä¿¡æ¯ä¸å·¥å…·é…ç½®

### ç»Ÿè®¡é¡¹

| ç»Ÿè®¡é¡¹ | æ•°å€¼ |
| :--- | :--- |
| **æ€»æ¼æ´æ•°** | [cite_start]5 [cite: 94] |
| **å½±å“æ–‡ä»¶æ•°** | [cite_start]5 [cite: 94] |
| **æ•´æ•°æº¢å‡º** | [cite_start]1 [cite: 94] |
| **å†…å­˜æ³„æ¼** | [cite_start]2 [cite: 94] |
| **è¶Šç•Œè®¿é—®** | [cite_start]1 [cite: 94] |
| **æœªåˆå§‹åŒ–å€¼** | [cite_start]1 [cite: 94] |
| **é«˜ä¸¥é‡æ€§** | [cite_start]2 (VUL-3, VUL-5) [cite: 94] |

### æ£€æµ‹å·¥å…·é…ç½®

| å·¥å…· | ç¼–è¯‘å‚æ•° | æ£€æµ‹æ¼æ´ |
| :--- | :--- | :--- |
| **UBSan** | `-fsanitize=undefined` | [cite_start]VUL-1 [cite: 96] |
| **ASan** | `-fsanitize=address` | [cite_start]VUL-3 [cite: 96] |
| **LSan** | `-fsanitize=leak` | [cite_start]VUL-2, VUL-4 [cite: 96] |
| **MSan** | `-fsanitize=memory` | [cite_start]VUL-5 [cite: 96] |
| **Valgrind** | `--leak-check=full` | [cite_start]VUL-2, VUL-4, VUL-5 [cite: 96] |

---
*æ³¨ï¼šæ­¤æŠ¥å‘ŠåŸºäºä½ æä¾›çš„æºæ–‡æ¡£å†…å®¹ç”Ÿæˆã€‚*
